{
  "statements": [
  {
    "query": "MATCH (:AWSAccount{id: {AWS_ID}})-[:RESOURCE]->(:ECRRepository)-[:IMAGE]->(n:ECRImage) WHERE n.lastupdated <> {UPDATE_TAG} WITH n LIMIT {LIMIT_SIZE} DETACH DELETE (n) return COUNT(*) as TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  },
  {
    "query": "MATCH (:AWSAccount{id: {AWS_ID}})-[:RESOURCE]->(n:ECRRepository) WHERE n.lastupdated <> {UPDATE_TAG} WITH n LIMIT {LIMIT_SIZE} DETACH DELETE (n) return COUNT(*) as TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  },
  {
    "query": "MATCH (:AWSAccount{id: {AWS_ID}})-[:RESOURCE]->(:ECRRepository)-[r:IMAGE]->(:ECRImage) WHERE r.lastupdated <> {UPDATE_TAG} WITH n LIMIT {LIMIT_SIZE} DETACH DELETE (r) RETURN COUNT(*) AS TotalCompleted",
    "iterative": true,
    "iterationsize": 100
  }],
  "name": "cleanup ECRImage|ECRRepository"
}
